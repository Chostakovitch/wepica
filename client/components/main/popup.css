.pop-over {
  background: #fff;
  border-bottom-color: #c2c2c2;
  box-shadow: 0 0.2vh 0.8vh rgba(0, 0, 0, 0.3);

  /* absolute positionning is, I believe, less intrusive for users especially for popups.
  as they are now all draggable by default, users can brings them with us by scrolling if they want to.
  however it may cause issues with coordinate systems as this kind of things is not my specialty; see
  PopupDetached for further context.  */
  position: absolute;
  overflow-x: hidden;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  resize: both;
  pointer-events: all;
  max-height: calc(100vh - 2 * var(--popup-margin));
  border-radius: var(--space-3xs);
  /* minimum for popups, see component */
  z-index: 10;

  &.popup-fullscreen {
    --popup-margin: 0;
  }

  .content-wrapper {
    width: auto;
    height: auto;
    position: relative;
    overflow-y: auto;
  }

  .content-wrapper > * {
    /* low specificity so that it can be transparently overriden,
    but could have side effects if no display is explicitely specific in inner content */
    display: flex;
    flex: 1;
    flex-direction: column;
    width: auto;
    height: auto;
  }
}

.pop-over.is-moving {
  * {
    cursor: grabbing !important;
  }
}

/* those tends to be built with grids, which adapts viewport but are not
really meant to be resized, because if they have "free" width, initial
sizing make them too large. maybe this can be relaxed per-popup */
&:has(.pop-over-list, .table-grid) {
  resize: none !important;
}

.pop-over .header {
  display: flex;
  justify-content: space-between;
  gap: 1ch;
  align-items: center;
  padding-inline: var(--space-xs);
  padding-block: var(--vspace-s);
  border-bottom: 1px solid #dcdcdc;
  color: #666;
  min-height: 1.5lh;
}
.pop-over .header .header-title {
  display: inline-block;
  font-weight: bold;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-size: var(--step-0);
  flex: 1;
  cursor: grab;
}
.pop-over .back-btn {
  float: left;
  overflow: hidden;
  transition: width 0.2s;
}
.pop-over .back-btn.is-hidden {
  width: 0;
}

.close-btn {
  aspect-ratio: 1/1;
  display: flex;
  justify-content: center;
}
.pop-over .content {
  overflow-y: auto;
  font-size: var(--step-0);

  .pop-over-text {
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 3;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* try to catch all small settings/info popups  */
  & > form, .at-form {
    gap: var(--vspace-2xs);
    button.submit {
      margin-block: var(--vspace-l);
    }
  }
}

.popup-placeholder {
  /* This gives relative coordinates but height/width cannot fit the parent's
  without it having position: relative; we need to get them programmatically */
  position: absolute;
  /* Take all size of parent so it can be useful in computations */
  visibility: hidden;
  display: none;
}


.pop-over .popup-drag-handle {
  cursor: grab;

  &:active {
    cursor: grabbing;
  }
}

body.mobile-mode  {
  .popup-drag-handle, .close-btn {
    font-size: var(--step-0);
    align-self: center;
  }
}

.pop-over .header-controls {
  display: flex;
}
/* Utility: remove left gutter inside specific popups */
.pop-over .content .flush-left {
  margin-left: 0;
  padding-left: 0;
  width: 100%;
}

/* Color selection popups: ensure proper alignment */
.pop-over .content form.swimlane-color-popup .palette-colors,
.pop-over .content form.edit-label .palette-colors,
.pop-over .content form.create-label .palette-colors {
  margin-left: 0;
  padding-left: 0;
  display: grid;
  grid-template-columns: repeat(5, var(--space-xl));
  grid-auto-rows: var(--space-xl);
  place-content: center;
  place-items: stretch;
  margin-block: var(--vspace-l);
}

/* Color palette items: ensure proper positioning */
.pop-over .content .palette-colors .palette-color {
  display: flex;
  place-content: center;
  place-items: center;
  outline: 0.1ch solid black;
}
.pop-over.search-over {
  background: #f0f0f0;
  min-height: 14vh;
}
.pop-over.search-over .header {
  display: none;
}
.pop-over.search-over .content {
  padding: 8px 4px 8px 10px;
  margin-right: 8px;
}
.pop-over .at-form .at-error,
.pop-over .at-form .at-result {
  padding: 8px 12px;
  margin: 0 0 10px 0;
}
.pop-over .at-form .at-result {
  background: #b2dfdb;
}
.pop-over .sk-spinner {
  margin: 40px auto;
}
.pop-over-list li {
  display: block;
  clear: both;
}
.pop-over-list li > a {
  clear: both;
  cursor: pointer;
  display: block;
  font-weight: 700;
  position: relative;
  text-decoration: none;
  overflow: hidden;
  display:flex;
  align-items: center;
  color: #000 !important;
}
.pop-over-list li > a > .member{
  align-self: flex-start;
  flex:0 0 auto;
}
.pop-over-list li > a .item-name {
  display: block;
  width: auto;
}
.pop-over .header .close-btn i.fa {
  color: #fff;
}
.pop-over-list li > a:not(.disabled):hover .sub-name,
.pop-over-list li > a:not(.disabled):hover .quiet {
  color: #eee;
}
.pop-over-list li > a:not(.disabled):hover .unread-indicator {
  background: #fff;
}
.pop-over-list li > a .sub-name {
  color: #8c8c8c;
  display: block;
  font-size: var(--step--1);
  font-weight: 400;
  line-height: 1.2em;
}
.pop-over-list li:has(a.current) {
  background-color: #e2e6e9;
}
.pop-over-list li:has(a:active) {
  background-color: #2e85b8;
}
.pop-over-list li:has(a.disabled) {
  color: #8c8c8c;
  cursor: default;
}
.pop-over-list li > a.disabled .vis-icon {
  opacity: 0.35;
}
.pop-over-list li > a.disabled:hover {
  background: none;
}
.pop-over-list li:has(a.disabled:hover .sub-name),
.pop-over-list li:has(a.disabled:hover .quiet) {
  color: #8c8c8c;
}
.pop-over-list li:has(a.disabled:active) {
  background: none;
}
.pop-over-list.inset li > a {
  border-radius: 3px;
  margin: 0;
}
.pop-over-list .pop-over-list.checkable .fa-check {
  display: none;
  position: absolute;
  top: 6px;
  right: 12px;
  color: #3cb500;
}
.pop-over-list .pop-over-list.checkable li.active a {
  padding-right: 28px;
}
.pop-over-list .pop-over-list.checkable li.active a .fa-check {
  display: block;
}
/* Grey check icons when grey icons setting is enabled */
body.grey-icons-enabled .pop-over-list .pop-over-list.checkable .fa-check {
  color: #7a7a7a;
}

body.mobile-mode .pop-over .content>form {
  max-width: 100%;
}

.pop-over .board-subtask-settings {
  >h3 {
    display: flex;
    flex-direction: column;
  }
}

.pop-over .board-card-settings {
  --t-columns: 12ch 12ch 20ch;
  font-size: var(--step--1);
}

.pop-over {
  &[data-popup="changeAvatarPopup"] {
    --t-columns: 10ch 30ch min-content;
  }
  &[data-popup="changeSettingsPopup"] {
    --t-columns: 30ch 15ch;
    li {
      place-items: center;
      max-width: 15ch;
    }
  }
  &[data-popup="deleteAvatarPopup"] {
    width: 30ch;
  }

  &[data-popup="addCardFormPopup"] {
    background: transparent;
    border: none;
    box-shadow: none;
    resize: none;
    .content {
      textarea {
        border-radius: 0;
        cursor: grab;
      }
      button {
        flex: 0;
      }
    }
  }
}